notify:
  - name: maximal
    platform: supernotify
    template_path: config/templates/supernotify        
    delivery:
      html_email:
        method: email
        template: default.html.j2
        condition:
          condition: or
          conditions:
            - condition: state
              entity_id: alarm_control_panel.home_alarm_control
              state:
                - armed_away
                - armed_home
                - armed_night
            - condition: state
              entity_id: supernotify.delivery_priority
              state:
                - critical
                - high     
        priority:
          - critical
          - high
          - medium
          - low
        
      backup_mail:
        method: email
        selection: 
          - fallback
      text_message:    
        method: sms
        service: notify.mikrotik_sms
        occupancy: only_out
        priority:
          - critical
          - high
      alexa_announce:
        method: alexa
        service: notify.alexa
        occupancy: any_in
      mobile_push:
        method: mobile_push
      expensive_api_call:
        method: generic
        service: notify.megacorp_api
        selection:
          - scenario
          - fallback_on_error
      alexa_show:
        method: media
        service: media_player.play_media
        target:
          - media_player.kitchen_2
      play_chimes:
        method: chime
        target:
          - script.chime_ding_dong
          - switch.chime_sax
          - media_player.echo_lobby
        occupancy: any_in
      doorbell_chime_alexa:
        method: chime
        target:
          - media_player.echo_lobby
        data:
          chime_tune: amzn_sfx_doorbell_chime_01
      upstairs_siren:
        method: generic
        service: mqtt.publish
        priority:
          - critical
        data:
          topic: zigbee2mqtt/Upstairs Siren/set
          payload: '{"warning": {"duration": 30, "mode": "emergency", "strobe": true }}'
      sleigh_bells:
        method: chime
        target:
          - media_player.echo_lobby
        data:
          chime_tune: christmas_05
        condition: 
          condition: template
          alias: Xmas
          value_template: >
            {% set n = now() %}
            {{ n.month == 12 and 15 <= n.day }}
    recipients:
      - person: person.new_home_owner
        email: jrb@jeymail.net
        phone_number: "+447989408889"
        delivery:
          mobile_push: 
            target:
              - mobile_app.new_iphone
            data:
              push:
                sound:
                  name: default
          alexa_announce:
            target:
              - media_player.echo_study
      - person: person.bidey_in
        phone_number: "+4489393013834"
        delivery:
          text_message:
            enabled: false
    overrides:
      image_url:
        base: http://10.1.1.100
        replace: https://myhomeserver.org/images
    methods:
      email:
        service: notify.smtp
      alexa:
        target:
          - media_player.kitchen_2
          - media_player.bedroom
          - media_player.hall_flex
          - media_player.old_kitchen_flex
          - media_player.studio
      
    scenarios:
      doorbell:
        delivery_selection: implicit
        media:
          camera: camera.doorbell
        delivery:
          doorbell_chime_alexa: 
            data:
              amazon_magic_id: a77464
          email:
      ordinary_day:
        alias: nothing special
        condition:
          condition: and
          conditions:
            - not:
                - condition: state
                  entity_id: alarm_control_panel.home_alarm_control
                  state: disarmed
            - condition: time
              after: "21:30:00"
              before: "06:30:00"
      mostly:
        alias: nothing special
        condition:
          condition: and
          conditions:
            - not:
                - condition: state
                  entity_id: alarm_control_panel.home_alarm_control
                  state: unknown
            - condition: time
              after: "06:30:00"
              before: "21:30:00"

    actions:
      examples:
        - identifier: action-1
          title: Example Mobile Action
          icon: "sfsymbols:bell"
          uri: http://10.111.10.111:8123
          activationMode: foreground
          authenticationRequired: false
          destructive: false
          behavior: default
          textInputButtonTitle: Input Button Title
          textInputPlaceholder: Input Placeholder Text
      frigate:
        - action_template: silence-{{camera.entity_id}}
          title_template: Silence Notifications for {{camera.entity_id}}
          icon: "sfsymbols:bell.slash"
      alarm_panel:
        - action: "ALARM_PANEL_DISARM"
          title: "Disarm Alarm Panel"
          icon: "sfsymbols:bell.slash"
        - action: "ALARM_PANEL_RESET"
          title: "Arm Alarm Panel for at Home"
          icon: "sfsymbols:bell"
        - action: "ALARM_PANEL_AWAY"
          title: "Arm Alarm Panel for Going Away"
          icon: "sfsymbols:airplane"
    links:
      - id: frigate_home
        url: http://frigate
        icon: "mdi:camera"
        name: Frigate
        description: Frigate CCTV


